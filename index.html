<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Check-list Di√°rio - LEFE</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 5px;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: white;
            padding: 20px; /* Aumentado para melhor espa√ßamento */
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #d90000;
            border-bottom: 2px solid #d90000;
            padding-bottom: 5px;
        }
        h1 {
            font-size: 24px;
            text-align: center;
        }
        h2 {
            font-size: 18px; /* Aumentado para melhor hierarquia */
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            padding: 8px; /* Aumentado para melhor legibilidade */
            border: 1px solid #ccc;
            text-align: left;
        }
        th {
            background-color: #f0f0f0;
        }
        input[type="text"], input[type="date"], input[type="time"], input[type="number"], select, textarea {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* Garante que padding n√£o afete a largura total */
        }
        td input, td select {
            width: auto; /* Ajusta o tamanho dos inputs na tabela */
        }
        .signature {
            margin-top: 15px;
        }
        .footer {
            margin-top: 15px;
            font-size: 12px;
            text-align: center;
            color: #666;
        }
        /* Toolbar e bot√£o de impress√£o */
        .toolbar {
            position: sticky;
            top: 0;
            z-index: 999;
            background: #f4f4f4;
            padding: 10px 0;
            max-width: 900px;
            margin: 0 auto 5px;
            text-align: right;
        }
        .btn-print, .btn-email {
            background: #d90000;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.10);
            margin-left: 10px;
        }
        .btn-print:hover, .btn-email:hover {
            background: #b80000;
        }
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            max-width: 300px;
            font-size: 16px;
        }
        .notification.success { background: #4CAF50; color: white; }
        .notification.error { background: #f44336; color: white; }
        .notification.warning { background: #ff9800; color: white; }

        .required-field {
            border: 2px solid #d90000 !important;
            background-color: #fff2f2;
        }
        @media print {
            .no-print, .no-print * {
                display: none !important;
            }
            body, .container {
                margin: 0;
                padding: 0;
                box-shadow: none;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Barra de ferramentas flutuante -->
    <div class="toolbar no-print">
        <button class="btn-print" onclick="window.print()">üñ®Ô∏è Imprimir</button>
        <button class="btn-email" onclick="enviarPorEmail()">‚úâÔ∏è Enviar por E-mail</button>
    </div>
    
    <div class="container">
        <h1>üöë LEFE - SERVI√áO DE EMERG√äNCIAS M√âDICAS</h1>
        <h2> üìã CHECK-LIST DI√ÅRIO DE INSPE√á√ÉO VEICULAR E EQUIPAMENTOS</h2>
        <table>
            <tr><td><strong>Hospital:</strong></td><td><input type="text" id="hospital" placeholder="Hospital Raimundo Lima"></td></tr>
            <tr><td><strong>Data:</strong></td><td><input type="date" id="data"></td></tr>
            <tr><td><strong>Hor√°rio de Entrada:</strong></td><td><input type="time" id="horarioEntrada" value="07:00"></td></tr>
            <tr><td><strong>Hor√°rio de Sa√≠da:</strong></td><td><input type="time" id="horarioSaida" value="19:00"></td></tr>
            <tr><td><strong>Condutor de Plant√£o:</strong></td><td><input type="text" id="condutorPlantao" placeholder="Nome completo"></td></tr>
            <tr><td><strong>Recebendo de:</strong></td><td><input type="text" id="recebendoDe" placeholder="Nome do condutor anterior"></td></tr>
        </table>
        
        <h2>üöë DADOS DA VIATURA (USA)</h2>
        <table>
            <tr><th>Item</th><th>Informa√ß√£o</th></tr>
            <tr><td><strong>Placa</strong></td><td><input type="text" id="placa" placeholder="Ex: RKU1F52"></td></tr>
            <tr><td><strong>Km Atual</strong></td><td><input type="number" id="kmAtual" placeholder="Ex: 337847"></td></tr>
            <tr><td><strong>N√≠vel de Combust√≠vel</strong></td><td><input type="text" id="nivelCombustivel" placeholder="Ex: 5/10 tra√ßos ou 1/2 tanque"></td></tr>
            <tr><td><strong>CRV V√°lido at√©</strong></td><td><input type="number" id="crvValido" placeholder="Ano (ex: 2024)"></td></tr>
            <tr><td><strong>Pr√≥xima Troca de √ìleo km</strong></td><td><input type="number" id="proximaTrocaOleo" placeholder="Km da pr√≥xima troca"></td></tr>
            <tr>
                <td><strong>Cart√£o de Abastecimento</strong></td>
                <td>
                    <input type="radio" id="cartaoDisponivel" name="cartaoStatus" value="Dispon√≠vel"> <label for="cartaoDisponivel">Dispon√≠vel</label>
                    <input type="radio" id="cartaoNaoDisponivel" name="cartaoStatus" value="N√£o Dispon√≠vel"> <label for="cartaoNaoDisponivel">N√£o Dispon√≠vel</label>
                </td>
            </tr>
        </table>
        
        <h2>üõ†Ô∏è STATUS DE INSPE√á√ÉO</h2>
        <p><em>Selecione o status: ‚úÖ OK | ‚ö†Ô∏è Ruim | üõ†Ô∏è Quebrado | ‚ùå Faltando | üõë Parar ve√≠culo</em></p>
        <table id="inspection-table">
            <thead>
                <tr><th>#</th><th>Item</th><th>Status</th><th>Observa√ß√£o</th></tr>
            </thead>
            <tbody>
                <!-- Os itens ser√£o gerados via JavaScript para facilitar a manipula√ß√£o -->
            </tbody>
        </table>
        
        <h2>üõ†Ô∏è OBSERVA√á√ïES GERAIS / AVARIAS</h2>
        <textarea id="observacoesAvarias" rows="10" style="width: 100%;"></textarea>
        
        <h2>‚úçÔ∏è ASSINATURAS (PARA IMPRESS√ÉO)</h2>
        <div class="signature">
            <p><strong>Condutor Recebendo o Plant√£o:</strong> _________________________________________</p>
            <p><strong>Condutor Entregando o Plant√£o:</strong> _________________________________________</p>
        </div>

        <div class="footer">
            <p>üìù Documento v√°lido como registro de inspe√ß√£o di√°ria ‚Äì LEFE<br>
            üóÇÔ∏è Arquivar ap√≥s preenchimento.<br>‚è≥ Atualizado em 2025.</p>
        </div>
    </div>
    
    <!-- Notifica√ß√£o -->
    <div id="notification" class="notification"></div>
    
    <script>
        // Lista de todos os itens do checklist
        const inspectionItems = [
            "√ìleo do motor", "√ìleo hidr√°ulico (caixa de dire√ß√£o)", "Fluido do radiador", "√Ågua do limpador de para-brisa",
            "Correia do alternador", "Correia dentada do motor", "Retrovisores", "Para-brisa", "Caixa de marchas",
            "Pisca dos retrovisores", "Far√≥is dianteiros", "Lanternas traseiras", "Buzina e pisca de alerta",
            "Bot√µes dos vidros el√©tricos", "Travamento das portas", "Sinalizadores de emerg√™ncia", "Sirene",
            "Luzes internas", "Farol de embarque", "Freio de estacionamento", "Pastilhas de freio (dianteira/traseira)",
            "Pneus", "Macaco, chave de roda, tri√¢ngulo", "Limpadores/palhetas do para-brisa", "Limpeza interna",
            "Limpeza externa", "Ar condicionado (dianteiro)", "Ar condicionado (traseiro)", "Extintor de inc√™ndio",
            "Alarme de estacionamento", "Alinhamento/Balanceamento", "Cilindro de oxig√™nio fixo (01)",
            "Cintos de seguran√ßa", "Maca e cinto de seguran√ßa", "Cadeira de rodas (se aplic√°vel)", "Prancha/Escada",
            "Bateria, inversor, transformador", "Bancos e capas", "Pintura/Plotagem", "C√¢mera de r√© (se aplic√°vel)",
            "Chave de troca de oxig√™nio", "Bala de oxig√™nio port√°til", "Desfibrilador", "Monitor", "Respirador",
            "Ox√≠metro", "Term√¥metro", "Glicos√≠metro", "Bolsa de medica√ß√£o", "Bolsa de entuba√ß√£o", "Bolsa de ventila√ß√£o",
            "Bolsa via a√©rea", "Arm√°rio do sal√£o", "Gavetas do sal√£o", "Ba√∫ do sal√£o", "Painel de controle do sal√£o"
        ];

        // Fun√ß√£o para gerar a tabela de inspe√ß√£o dinamicamente
        function generateInspectionTable() {
            const tableBody = document.querySelector("#inspection-table tbody");
            const statusOptions = `
                <option value=""></option>
                <option value="‚úÖ OK">‚úÖ OK</option>
                <option value="‚ö†Ô∏è Ruim">‚ö†Ô∏è Ruim</option>
                <option value="üõ†Ô∏è Quebrado">üõ†Ô∏è Quebrado</option>
                <option value="‚ùå Faltando">‚ùå Faltando</option>
                <option value="üõë Parar Ve√≠culo">üõë Parar Ve√≠culo</option>
            `;
            
            inspectionItems.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${(index + 1).toString().padStart(2, '0')}</td>
                    <td>${item}</td>
                    <td><select id="status-${index + 1}">${statusOptions}</select></td>
                    <td><input type="text" id="obs-${index + 1}" style="width: 100%;"></td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Definir data atual ao carregar a p√°gina
        document.getElementById("data").value = new Date().toISOString().split("T")[0];
        // Gerar a tabela
        generateInspectionTable();
        
        // Fun√ß√£o para validar campos obrigat√≥rios
        function validateForm() {
            const requiredFields = [
                { id: "hospital", name: "Hospital" },
                { id: "data", name: "Data" },
                { id: "condutorPlantao", name: "Condutor de Plant√£o" },
                { id: "placa", name: "Placa" },
                { id: "kmAtual", name: "Km Atual" }
            ];
            
            let isValid = true;
            let missingFields = [];
            
            // Limpa formata√ß√£o anterior
            document.querySelectorAll('.required-field').forEach(el => el.classList.remove('required-field'));
            
            requiredFields.forEach(field => {
                const element = document.getElementById(field.id);
                if (!element.value.trim()) {
                    isValid = false;
                    missingFields.push(field.name);
                    element.classList.add("required-field");
                }
            });
            
            if (!isValid) {
                showNotification("Por favor, preencha os campos obrigat√≥rios: " + missingFields.join(", "), "error");
            }
            
            return isValid;
        }
        
        // Fun√ß√£o para enviar por email usando mailto:
        function enviarPorEmail() {
            if (!validateForm()) {
                return;
            }
            
            // --- COLETA DE DADOS ---
            const dadosCabecalho = {
                hospital: document.getElementById("hospital").value,
                data: new Date(document.getElementById("data").value).toLocaleDateString('pt-BR', { timeZone: 'UTC' }),
                horarioEntrada: document.getElementById("horarioEntrada").value,
                horarioSaida: document.getElementById("horarioSaida").value,
                condutorPlantao: document.getElementById("condutorPlantao").value,
                recebendoDe: document.getElementById("recebendoDe").value
            };
            
            const dadosViatura = {
                placa: document.getElementById("placa").value.toUpperCase(),
                kmAtual: document.getElementById("kmAtual").value,
                nivelCombustivel: document.getElementById("nivelCombustivel").value,
                crvValido: document.getElementById("crvValido").value,
                proximaTrocaOleo: document.getElementById("proximaTrocaOleo").value,
                cartaoStatus: document.querySelector('input[name="cartaoStatus"]:checked')?.value || 'N√£o informado'
            };
            
            const itensInspecao = [];
            for (let i = 1; i <= inspectionItems.length; i++) {
                const status = document.getElementById(`status-${i}`).value;
                const obs = document.getElementById(`obs-${i}`).value.trim();
                if (status || obs) { // Apenas adiciona se tiver status ou observa√ß√£o
                    itensInspecao.push({
                        num: i.toString().padStart(2, '0'),
                        item: inspectionItems[i-1],
                        status: status || 'N√£o avaliado',
                        obs: obs || '---'
                    });
                }
            }

            if (itensInspecao.length === 0) {
                showNotification("Nenhum item de inspe√ß√£o foi preenchido. Preencha ao menos um status.", "warning");
                return;
            }

            const observacoesGerais = document.getElementById("observacoesAvarias").value;
            
            // --- MONTAGEM DO CORPO DO E-MAIL (HTML) ---
            let corpoEmail = `
                <div style="font-family: Arial, sans-serif; font-size: 14px;">
                    <h2 style="color: #d90000;">Check-list Di√°rio - Viatura ${dadosViatura.placa}</h2>
                    <p><strong>Data:</strong> ${dadosCabecalho.data}</p>
                    <p><strong>Condutor de Plant√£o:</strong> ${dadosCabecalho.condutorPlantao}</p>
                    
                    <h3 style="color: #333;">Dados da Viatura</h3>
                    <table border="1" cellpadding="5" cellspacing="0" style="width:100%; border-collapse: collapse;">
                        <tr><td style="background-color: #f0f0f0;"><strong>Placa:</strong></td><td>${dadosViatura.placa}</td></tr>
                        <tr><td style="background-color: #f0f0f0;"><strong>Km Atual:</strong></td><td>${dadosViatura.kmAtual} km</td></tr>
                        <tr><td style="background-color: #f0f0f0;"><strong>N√≠vel Combust√≠vel:</strong></td><td>${dadosViatura.nivelCombustivel}</td></tr>
                        <tr><td style="background-color: #f0f0f0;"><strong>Cart√£o Abastecimento:</strong></td><td>${dadosViatura.cartaoStatus}</td></tr>
                    </table>

                    <h3 style="color: #333; margin-top: 20px;">Itens de Inspe√ß√£o com Observa√ß√µes</h3>
                    <table border="1" cellpadding="5" cellspacing="0" style="width:100%; border-collapse: collapse;">
                        <tr style="background-color: #f0f0f0;">
                            <th>#</th>
                            <th>Item</th>
                            <th>Status</th>
                            <th>Observa√ß√£o</th>
                        </tr>
                        ${itensInspecao.map(item => `
                            <tr>
                                <td>${item.num}</td>
                                <td>${item.item}</td>
                                <td>${item.status}</td>
                                <td>${item.obs}</td>
                            </tr>
                        `).join('')}
                    </table>
                    
                    ${observacoesGerais ? `
                        <h3 style="color: #333; margin-top: 20px;">Observa√ß√µes Gerais / Avarias</h3>
                        <p style="white-space: pre-wrap; border: 1px solid #ccc; padding: 10px; background-color: #f9f9f9;">${observacoesGerais}</p>
                    ` : ''}

                    <p style="margin-top: 20px; font-size: 12px; color: #666;">E-mail gerado automaticamente pelo sistema de Check-list LEFE.</p>
                </div>
            `;
            
            // --- CRIA√á√ÉO DO LINK mailto: ---
            const para = "email_destinatario@sua_empresa.com"; // <-- TROQUE PELO E-MAIL DE DESTINO
            const assunto = `Check-list Viatura ${dadosViatura.placa} - ${dadosCabecalho.data}`;
            
            // encodeURIComponent √© crucial para garantir que caracteres especiais n√£o quebrem o link
            const mailtoLink = `mailto:${para}?subject=${encodeURIComponent(assunto)}&body=${encodeURIComponent(corpoEmail)}`;
            
            // Abre o cliente de e-mail do usu√°rio
            window.location.href = mailtoLink;

            showNotification("Preparando e-mail... Verifique seu programa de e-mail.", "success");
        }
        
        // Fun√ß√£o para mostrar notifica√ß√µes
        function showNotification(message, type) {
            const notification = document.getElementById("notification");
            notification.textContent = message;
            notification.className = "notification " + type;
            notification.style.display = "block";
            
            setTimeout(() => {
                notification.style.display = "none";
            }, 6000); // Aumentei o tempo para 6 segundos
        }
    </script>
</body>
</html>
